{"remainingRequest":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\src\\views\\app\\inspection\\inspection.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\src\\views\\app\\inspection\\inspection.vue","mtime":1604219687984},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:/Users/Anwender/SJO/evi/evi/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { apiService } from \"@/common/api.service.js\";\nimport { AgGridVue } from '@ag-grid-community/vue';\nimport $ from 'jquery'; // import print from 'print-js'\n\nimport { Color } from '@ag-grid-community/all-modules';\nexport default {\n  metaInfo: {\n    title: \"Edit Inspection\"\n  },\n  components: {\n    AgGridVue: AgGridVue\n  },\n  data: function data() {\n    return {\n      // VUE VARIABLES\n      inspection: [],\n      inNum: [],\n      inType: [],\n      inStatus: [],\n      samples: [],\n      sampleAttributes: [],\n      activeSampleAttributes: [],\n      device: [],\n      // RELEASE & NOTES\n      IStatus: 'Work In Progress',\n      IType: null,\n      DatInspection: null,\n      DatDeliveredOn: null,\n      DatRequestedOn: null,\n      RequestedBy: null,\n      Inspector: null,\n      Comment: null,\n      // BOOLEAN STATES\n      loadingDevice: false,\n      loadingSample: false,\n      loadingAttributes: false,\n      loadingNumber: false,\n      loadingType: false,\n      error: false,\n      Superuser: false,\n      // OPTIONS  \n      optionsInspectionStatus: [{\n        value: 'Work In Progress',\n        text: 'Work In Progress'\n      }, {\n        value: 'On Hold',\n        text: 'On Hold'\n      }, {\n        value: 'Complete',\n        text: 'Complete'\n      }, {\n        value: 'Declined',\n        text: 'Declined'\n      }]\n    };\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    var id = localStorage.getItem('InspectionID');\n\n    if (id == null || id == undefined) {\n      next('/app/inspection/inspection-list');\n    } else {\n      next();\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    localStorage.removeItem('InspectionID');\n    next();\n  },\n  computed: {},\n  methods: {\n    onSubmit: function onSubmit(type) {\n      var _this = this;\n\n      if (type == 'save') {\n        this.saveInspection();\n      } else if (type == 'close') {\n        this.saveInspection();\n        setTimeout(function () {\n          _this.closeInspection();\n        }, 2300);\n      }\n    },\n    returnFilteredAtts: function returnFilteredAtts(sample, type) {\n      var el = this.sampleAttributes.filter(function (e) {\n        return e.idSample == sample.id;\n      });\n      var temp = el.filter(function (e) {\n        return e.txtValueType == type;\n      });\n      return temp;\n    },\n    closeInspection: function closeInspection() {\n      this.$router.push(\"/app/inspection/inspection-list/\");\n    },\n    saveInspection: function saveInspection() {\n      var _this2 = this;\n\n      var id = localStorage.getItem('InspectionID');\n      var InspectionNumber = this.inNum.label + '-' + this.inNum.type + '-' + this.inNum.year + '-' + this.inNum.number;\n      var endpoint = \"/api/inspection/\".concat(id, \"/\");\n      apiService(endpoint, \"PATCH\", {\n        txtInspectionNumber: InspectionNumber,\n        txtInspectionStatus: this.inStatus,\n        txtInspector: this.Inspector,\n        datInspection: this.DatInspection,\n        datDeliveredOn: this.DatDeliveredOn,\n        datRequestedOn: this.DatRequestedOn,\n        txtRequestedBy: this.RequestedBy,\n        txtComment: this.Comment\n      }).then(function (response) {\n        _this2.$bvToast.toast(\"Saved successfully!\", {\n          title: 'SUCCESS',\n          variant: 'success',\n          autoHideDelay: 2000,\n          appendToast: false\n        });\n      });\n    },\n    saveSampleAttributes: function saveSampleAttributes(att) {\n      if (att !== undefined) {\n        if (att.txtValueAttribute !== \"\") {\n          var endpoint = \"/api/sample-attribute/\".concat(att.id, \"/\");\n          apiService(endpoint, \"PATCH\", {\n            txtValueAttribute: att.txtValueAttribute,\n            txtParameter: att.txtParameter\n          });\n        }\n      }\n    },\n    fillInspection: function fillInspection() {\n      this.inStatus = this.inspection.txtInspectionStatus;\n      this.Inspector = this.inspection.txtInspector;\n      this.RequestedBy = this.inspection.txtRequestedBy;\n      this.DatInspection = this.inspection.datInspection;\n      this.DatDeliveredOn = this.inspection.datDeliveredOn;\n      this.DatRequestedOn = this.inspection.datRequestedOn;\n      this.Comment = this.inspection.txtComment;\n    },\n    getParameter: function getParameter(params) {\n      var arr = [];\n      var el = params.split(',');\n\n      for (var i = 0; i < el.length; i++) {\n        arr.push({\n          value: el[i],\n          text: el[i]\n        });\n      }\n\n      return arr;\n    },\n    getSamples: function getSamples(id) {\n      var _this3 = this;\n\n      this.samples = [];\n      var endpoint = \"/api/sample-list/\";\n      apiService(endpoint).then(function (data) {\n        var el = [];\n        el.push.apply(el, _toConsumableArray(data.results));\n        _this3.samples = el.filter(function (e) {\n          return e.idInspection.id === id;\n        });\n        _this3.loadingSample = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getSampleAttributes: function getSampleAttributes() {\n      var _this4 = this;\n\n      this.sampleAttributes = [];\n      var endpoint = \"/api/sample-attribute/\";\n      apiService(endpoint).then(function (data) {\n        var _this4$sampleAttribut;\n\n        (_this4$sampleAttribut = _this4.sampleAttributes).push.apply(_this4$sampleAttribut, _toConsumableArray(data.results));\n\n        _this4.loadingAttributes = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getOrderDevice: function getOrderDevice(id) {\n      var _this5 = this;\n\n      this.device = [];\n      var endpoint = \"/api/order-device-list/\";\n      apiService(endpoint).then(function (data) {\n        var el = [];\n        el.push.apply(el, _toConsumableArray(data.results));\n        var temp = el.filter(function (e) {\n          return e.id == id;\n        });\n        _this5.device = temp[0];\n        _this5.loadingDevice = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getInspection: function getInspection() {\n      var _this6 = this;\n\n      var id = localStorage.getItem('InspectionID');\n      var endpoint = \"/api/inspection/\".concat(id, \"/\");\n      apiService(endpoint).then(function (data) {\n        _this6.inspection = data;\n\n        _this6.fillInspection();\n\n        _this6.getOrderDevice(_this6.inspection.idOrderDevice);\n\n        _this6.getSamples(_this6.inspection.id);\n\n        _this6.getInspectionNumber(_this6.inspection.txtInspectionNumber);\n\n        _this6.getInspectionType(_this6.inspection.idInspectionType);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getInspectionNumber: function getInspectionNumber(number) {\n      var el = number.split('-');\n      this.inNum = {\n        label: el[0],\n        type: el[1],\n        year: el[2],\n        number: el[3]\n      };\n      this.loadingNumber = true;\n    },\n    getInspectionType: function getInspectionType(id) {\n      var _this7 = this;\n\n      var endpoint = \"/api/inspection-type/\".concat(id, \"/\");\n      apiService(endpoint).then(function (data) {\n        _this7.inType = data;\n        _this7.loadingType = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  },\n  created: function created() {\n    this.getSampleAttributes();\n    this.getInspection();\n  }\n};",null]}