{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-457dbb76\"],{1479:function(e,t,a){\"use strict\";a(\"158f\")},\"158f\":function(e,t,a){},\"25da\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"main-content\"},[a(\"breadcumb\",{attrs:{page:\"Results\",folder:\"Inspection\"}}),e._v(\" \"),a(\"b-row\",[a(\"b-col\",{attrs:{lg:\"6\",md:\"6\",sm:\"12\"}},[a(\"b-card\",{staticClass:\"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center\"},[a(\"i\",{staticClass:\"i-File-Clipboard-File--Text\"}),e._v(\" \"),a(\"div\",{staticClass:\"content\"},[a(\"p\",{staticClass:\"text-muted mt-2 mb-0\"},[e._v(\"Results\")]),e._v(\" \"),a(\"p\",{staticClass:\"inline text-primary text-24 line-height-1 mb-2\"},[e._v(e._s(this.results.length))])])])],1),e._v(\" \"),a(\"b-col\",{attrs:{lg:\"6\",md:\"6\",sm:\"12\"}},[a(\"b-card\",{staticClass:\"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center\"},[a(\"i\",{staticClass:\"i-Calendar\"}),e._v(\" \"),a(\"div\",{staticClass:\"content\"},[a(\"p\",{staticClass:\"text-muted mt-2 mb-0\"},[e._v(\"Date\")]),e._v(\" \"),a(\"p\",{staticClass:\"text-primary text-24 line-height-1 mb-2\"},[a(\"nobr\",[e._v(e._s(this.date))])],1)])])],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-md-12\"},[a(\"div\",{staticClass:\"card mb-30\"},[a(\"div\",{staticClass:\"card-body p-0 mb-3\"},[a(\"b-row\",{staticClass:\"ml-3\"},[a(\"i\",{staticClass:\"nav-icon i-Add mt-3\",staticStyle:{\"font-size\":\"20px\"},attrs:{id:\"new-result-section\"},on:{click:function(t){return e.emptyInput(\"add\")}}}),e._v(\" \"),a(\"h5\",{staticClass:\"card-title border-bottom p-3 mb-2\"},[e._v(\"New Result\")])]),e._v(\" \"),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.show,expression:\"show\"}],staticClass:\"mt-3\"},[a(\"b-form\",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a(\"b-row\",{staticClass:\"ml-3 mr-3\"},[a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"2\"}},[a(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Released by\"},model:{value:e.ReleasedBy,callback:function(t){e.ReleasedBy=t},expression:\"ReleasedBy\"}})],1),e._v(\" \"),a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"4\"}},[a(\"b-form-datepicker\",{attrs:{placeholder:\"Release Date\"},model:{value:e.ReleaseDate,callback:function(t){e.ReleaseDate=t},expression:\"ReleaseDate\"}})],1),e._v(\" \"),a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"3\"}},[a(\"v-select\",{attrs:{options:e.optionReleaseStatus,placeholder:\"Choose Release Status\",reduce:function(e){return e.code}},model:{value:e.ReleaseStatus,callback:function(t){e.ReleaseStatus=t},expression:\"ReleaseStatus\"}})],1),e._v(\" \"),a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"3\"}},[a(\"v-select\",{attrs:{options:e.optionReference,placeholder:\"Choose Reference Status\",reduce:function(e){return e.code}},model:{value:e.Reference,callback:function(t){e.Reference=t},expression:\"Reference\"}})],1)],1),e._v(\" \"),a(\"b-row\",{staticClass:\"ml-3 mr-3\"},[a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"3\"}},[a(\"v-select\",{attrs:{options:e.orderItems,placeholder:\"Choose Order Item\",\"get-option-label\":function(e){return e.idOrder.txtOrderNumber+\" - \"+e.idItem.txtDescription}},on:{input:function(t){return e.getSample()}},model:{value:e.OrderItem,callback:function(t){e.OrderItem=t},expression:\"OrderItem\"}})],1),e._v(\" \"),a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"3\"}},[a(\"v-select\",{attrs:{options:e.inspections,placeholder:\"Choose Inspection\",\"get-option-label\":function(e){return e.txtInspectionNumber+\" - \"+e.txtInspectionType}},on:{input:function(t){return e.getSample()}},model:{value:e.Inspection,callback:function(t){e.Inspection=t},expression:\"Inspection\"}})],1),e._v(\" \"),a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"3\"}},[a(\"v-select\",{attrs:{options:e.optionSamples,placeholder:\"Choose Sample\",disabled:!e.selectSample,\"get-option-label\":function(e){return e.idInspection.txtInspectionNumber+\" - \"+e.idOrderItem.idItem.txtDescription}},model:{value:e.Sample,callback:function(t){e.Sample=t},expression:\"Sample\"}})],1),e._v(\" \"),a(\"b-col\",{staticClass:\"mt-3\",attrs:{md:\"3\"}},[a(\"v-select\",{attrs:{options:e.models,label:\"txtModelName\",placeholder:\"Choose Model\"},model:{value:e.Model,callback:function(t){e.Model=t},expression:\"Model\"}})],1)],1),e._v(\" \"),a(\"b-row\",{staticClass:\"ml-3 mr-3\"},[a(\"b-col\",{staticClass:\"mt-4\",attrs:{md:\"12\"}},[a(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Link\"},model:{value:e.Link,callback:function(t){e.Link=t},expression:\"Link\"}})],1)],1),e._v(\" \"),a(\"b-row\",{staticClass:\"ml-3 mr-3 mt-3\"},[a(\"b-col\",{attrs:{md:\"12\"}},[a(\"b-form-textarea\",{attrs:{placeholder:\"Enter memo ...\",rows:\"3\",\"max-rows\":\"6\"},model:{value:e.Comment,callback:function(t){e.Comment=t},expression:\"Comment\"}})],1)],1),e._v(\" \"),a(\"b-row\",{staticClass:\"ml-3 mt-5 mr-3\"},[e.updateStatus?e.updateStatus?a(\"b-col\",{attrs:{md:\"6\"}},[a(\"b-button\",{attrs:{block:\"\",variant:\"outline-info\"},on:{click:e.emptyInput}},[e._v(\"Cancel\")])],1):e._e():a(\"b-col\",{attrs:{md:\"6\"}},[a(\"b-button\",{attrs:{block:\"\",variant:\"outline-danger\"},on:{click:e.emptyInput}},[e._v(\"Delete Input\")])],1),e._v(\" \"),e.updateStatus?e.updateStatus?a(\"b-col\",{attrs:{md:\"6\"}},[a(\"b-button\",{attrs:{type:\"submit\",block:\"\",variant:\"warning\",disabled:e.disabled}},[e._v(\"Update Result\")])],1):e._e():a(\"b-col\",{attrs:{md:\"6\"}},[a(\"b-button\",{attrs:{type:\"submit\",block:\"\",variant:\"success\",disabled:e.disabled}},[e._v(\"Add Result\")])],1)],1),e._v(\" \"),a(\"b-row\",{staticClass:\"ml-3 mt-3 mr-3\"},[a(\"b-col\",{attrs:{md:\"12\"}},[e.error?a(\"b-alert\",{attrs:{show:\"\",variant:\"alert alert-card alert-danger\",dismissible:\"\"}},[a(\"strong\",{staticClass:\"text-capitalize\"},[e._v(\"Error!\")]),e._v(\" The Input is not valid.\\n                  \")]):e._e()],1)],1)],1)],1)],1)])])]),e._v(\" \"),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-md-12\"},[a(\"div\",{staticClass:\"card mb-30\"},[a(\"div\",{staticClass:\"card-body p-0\"},[a(\"h5\",{staticClass:\"card-title p-3 pb-0 mb-3\"},[e._v(\"Results\")]),e._v(\" \"),a(\"AgGridVue\",{staticClass:\"ag-theme-alpine\",attrs:{id:\"gridResult\",defaultColDef:e.defaultColDef,columnDefs:e.columnDefs,rowSelection:e.rowSelection,rowData:e.rowData,gridOptions:e.gridOptions,suppressRowClickSelection:!0,excelStyles:e.excelStyles,pagination:!0,paginationPageSize:e.paginationPageSize,getContextMenuItems:e.getContextMenu,domLayout:e.domLayout,modules:e.modules},on:{cellValueChanged:e.updateResultGrid,gridReady:e.onGridReady}}),e._v(\" \"),a(\"div\",{staticClass:\"ml-3 mr-3 mt-2 mb-2 text-right\"},[e._v(\"\\n              Page Size:\\n              \"),a(\"select\",{attrs:{id:\"page-size\"},on:{change:e.onPageSizeChanged}},[a(\"option\",{attrs:{value:\"10\",selected:\"\"}},[e._v(\"10\")]),e._v(\" \"),a(\"option\",{attrs:{value:\"20\"}},[e._v(\"20\")]),e._v(\" \"),a(\"option\",{attrs:{value:\"50\"}},[e._v(\"50\")]),e._v(\" \"),a(\"option\",{attrs:{value:\"100\"}},[e._v(\"100\")]),e._v(\" \"),a(\"option\",{attrs:{value:\"200\"}},[e._v(\"200\")])]),e._v(\" \"),a(\"b-button\",{staticClass:\"ml-3\",attrs:{size:\"sm\",variant:\"outline-success\"},on:{click:e.excelExportResult}},[e._v(\"Export Excel\")])],1)],1)])])]),e._v(\" \"),a(\"b-row\",{staticClass:\"ml-1 mr-3 mb-4\"},[a(\"b-button\",{staticClass:\"mr-3\",attrs:{variant:\"primary\"},on:{click:e.saveState}},[e._v(\"Save Grid State\")]),e._v(\" \"),a(\"b-button\",{attrs:{variant:\"outline-light\"},on:{click:e.restoreState}},[e._v(\"Reset Grid State\")])],1)],1)},l=[],i=a(\"2909\"),n=(a(\"96cf\"),a(\"1da1\")),o=(a(\"c5f6\"),a(\"5ce5\")),r=a(\"228c\"),c=a(\"9974\"),u={metaInfo:{title:\"Inspection\"},components:{AgGridVue:r[\"AgGridVue\"]},data:function(){return{gridOptions:null,gridApi:null,columnApi:null,columnDefs:null,rowData:null,rowSelection:null,defaultColDef:null,excelStyles:null,frameworkComponents:null,modules:c[\"a\"],domLayout:null,paginationPageSize:0,params:null,eGui:null,results:[],orderItems:[],samples:[],optionSamples:[],models:[],inspections:[],suppliers:[],Directory:null,ReleasedBy:null,ReleaseDate:null,ReleaseStatus:null,Reference:!1,Link:null,Comment:null,OrderItem:null,Sample:null,Model:null,Inspection:null,Supplier:null,show:!1,date:null,error:!1,selectSample:!1,updateStatus:!1,updateId:null,optionReference:[{code:!0,label:\"Yes\"},{code:!1,label:\"No\"}],optionReleaseStatus:[{code:\"Approved\",label:\"Approved\"},{code:\"Not Approved\",label:\"Not Approved\"},{code:\"Cancelled\",label:\"Cancelled\"}]}},beforeMount:function(){this.gridOptions={},this.columnDefs=[{headerName:\"Released by\",field:\"txtReleasedBy\",filter:\"agTextColumnFilter\"},{headerName:\"Release Date\",field:\"datReleaseDate\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Release Status\",field:\"txtReleaseStatus\",filter:\"agTextColumnFilter\",cellEditor:\"agRichSelectCellEditor\",cellEditorParams:{cellHeight:50,values:[\"Approved\",\"Not Approved\",\"Cancelled\"]}},{headerName:\"Reference\",field:\"blnReference\",filter:\"agTextColumnFilter\",valueGetter:blnValueGetter,editable:!1},{headerName:\"Model\",field:\"idModel.txtModelName\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Supplier\",field:\"idSample.idOrderItem.idOrder.idSupplier.txtSupplierName\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Sample\",field:\"idSample.idOrderItem.idItem.txtDescription\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Inspection\",field:\"idSample.idInspection.txtInspectionNumber\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Link\",field:\"txtLink\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Memo\",field:\"txtComment\",filter:\"agTextColumnFilter\",editable:!1}],this.defaultColDef={flex:1,editable:!0,resizable:!0,sortable:!0,filter:!0,floatingFilter:!0},this.rowSelection=\"single\",this.domLayout=\"autoHeight\",this.paginationPageSize=10},mounted:function(){null!=JSON.parse(localStorage.getItem(\"result_columnStats\"))?this.gridOptions.columnApi.setColumnState(JSON.parse(localStorage.getItem(\"result_columnStats\"))):(this.gridApi=this.gridOptions.api,this.gridColumnApi=this.gridOptions.columnApi)},computed:{disabled:function(){return!this.ReleasedBy||(!this.ReleaseDate||(!this.ReleaseStatus||(!this.Sample||!this.Model)))}},methods:{getSample:function(){null!=this.OrderItem&&null!=this.Inspection?(this.getSamples(this.OrderItem.id,this.Inspection.id),null!=this.optionSamples&&(this.selectSample=!0)):(this.selectSample=!1,this.samples=[])},saveState:function(){localStorage.setItem(\"result_columnStats\",JSON.stringify(this.gridOptions.columnApi.getColumnState()))},restoreState:function(){localStorage.setItem(\"result_columnStats\",null)},excelExportResult:function(){this.gridApi.exportDataAsExcel({})},onSubmit:function(){this.updateStatus?this.updateResult():this.addResult()},onGridReady:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi},onPageSizeChanged:function(e){var t=document.getElementById(\"page-size\").value;this.gridOptions.paginationSetPageSize(Number(t))},addResult:function(){var e=this,t=\"/api/result/\";Object(o[\"a\"])(t,\"POST\",{txtReleasedBy:this.ReleasedBy,datReleaseDate:this.ReleaseDate,txtReleaseStatus:this.ReleaseStatus,blnReference:this.Reference,txtLink:this.Link,txtComment:this.Comment,idSample:this.Sample.id,idModel:this.Model.id}).then((function(t){\"ERROR\"!=t&&(e.getResults(),e.emptyInput())})).catch((function(e){return console.log(e)}))},editResultMenu:function(e){this.emptyInput();var t=e.node.data;this.ReleasedBy=t.txtReleasedBy,this.ReleaseDate=t.datReleaseDate,this.ReleaseStatus=t.txtReleaseStatus,this.Reference=t.blnReference,this.Link=t.txtLink,this.Comment=t.txtComment,this.Sample=t.idSample,this.Model=t.idModel,this.OrderItem=t.idSample.idOrderItem,this.Inspection=t.idSample.idInspection,this.Supplier=t.idSample.idOrderItem.idOrder.idSupplier,this.updateStatus=!0,this.updateId=t.id,this.show=!0,document.documentElement.scrollTop=0},updateResult:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=\"/api/result/\".concat(this.updateId,\"/\"),e.next=3,Object(o[\"a\"])(t,\"PATCH\",{txtReleasedBy:this.ReleasedBy,datReleaseDate:this.ReleaseDate,txtReleaseStatus:this.ReleaseStatus,blnReference:this.Reference,txtLink:this.Link,txtComment:this.Comment,idSample:this.Sample.id,idModel:this.Model.id}).then((function(e){\"ERROR\"!=e&&(a.emptyInput(),a.getResults())})).catch((function(e){return console.log(e)}));case 3:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateResultGrid:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=\"/api/result/\".concat(t.node.data.id,\"/\"),e.prev=1,e.next=4,Object(o[\"a\"])(a,\"PATCH\",{txtReleasedBy:t.node.data.txtReleasedBy,datReleaseDate:t.node.data.datReleaseDate,txtReleaseStatus:t.node.data.txtReleaseStatus,blnReference:t.node.data.blnReference,txtLink:t.node.data.txtLink,txtComment:t.node.data.txtComment}).catch((function(e){return console.log(e)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e[\"catch\"](1),console.log(e.t0);case 9:case\"end\":return e.stop()}}),e,null,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}(),openModal:function(e){var t=this;this.$bvModal.msgBoxConfirm(\"Are you sure you want to delete the selected Result?\",{title:\"Please Confirm\",size:\"m\",buttonSize:\"sm\",okVariant:\"danger\",okTitle:\"YES\",cancelTitle:\"NO\",footerClass:\"p-2\",hideHeaderClose:!1,centered:!0}).then((function(a){a&&t.deleteResult(e)})).catch((function(e){return console.log(e)}))},deleteResult:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(t){var a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=\"/api/result/\".concat(t.node.data.id,\"/\"),e.next=3,Object(o[\"a\"])(a,\"DELETE\").then((function(e){\"ERROR\"!=e?s.getResults():s.$bvToast.toast(\"Can't delete this entry. Please check if there are dependent entries. Please delete those first!\",{title:\"DELETE WARNING\",variant:\"danger\",autoHideDelay:6e3,appendToast:!1})}));case 3:case\"end\":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),emptyInput:function(e){this.ReleasedBy=this.ReleaseDate=this.ReleaseStatus=this.Reference=this.Link=null,this.Comment=this.Sample=this.Model=this.Inspection=this.OrderItem=this.Supplier=null,\"add\"!=e?this.show=!1:(this.updateStatus=!1,this.show=!this.show)},getResults:function(){var e=this;this.results=[];var t=\"/api/result-list/\";Object(o[\"a\"])(t).then((function(t){var a;(a=e.results).push.apply(a,Object(i[\"a\"])(t.results)),e.rowData=e.results})).catch((function(e){return console.log(e)}))},getSamples:function(e,t){var a=this;this.samples=[];var s=\"/api/sample-list/\";Object(o[\"a\"])(s).then((function(s){var l;(l=a.samples).push.apply(l,Object(i[\"a\"])(s.results)),a.optionSamples=a.samples.filter((function(a){return a.idOrderItem.id===e&&a.idInspection.id===t}))})).catch((function(e){return console.log(e)}))},getOrderItem:function(){var e=this;this.orderItems=[];var t=\"/api/order-item-list/\";Object(o[\"a\"])(t).then((function(t){var a;(a=e.orderItems).push.apply(a,Object(i[\"a\"])(t.results))})).catch((function(e){return console.log(e)}))},getModels:function(){var e=this;this.models=[];var t=\"/api/model/\";Object(o[\"a\"])(t).then((function(t){var a;(a=e.models).push.apply(a,Object(i[\"a\"])(t.results))})).catch((function(e){return console.log(e)}))},getInspections:function(){var e=this;this.inspections=[];var t=\"/api/inspection/\";Object(o[\"a\"])(t).then((function(t){var a;(a=e.inspections).push.apply(a,Object(i[\"a\"])(t.results))})).catch((function(e){return console.log(e)}))},getSuppliers:function(){var e=this;this.suppliers=[];var t=\"/api/supplier/\";Object(o[\"a\"])(t).then((function(t){var a;(a=e.suppliers).push.apply(a,Object(i[\"a\"])(t.results))})).catch((function(e){return console.log(e)}))},getDateToday:function(){var e=new Date;this.date=e.getDate()+\" / \"+(e.getMonth()+1)+\" / \"+e.getFullYear()},getContextMenu:function(e){var t=this,a=[{name:\"Edit Result\",action:function(){return t.editResultMenu(e)}},\"separator\",{name:\"Delete Result\",action:function(){return t.openModal(e)}},\"export\"];return a}},created:function(){this.getDateToday(),this.getResults(),this.getModels(),this.getInspections(),this.getSuppliers(),this.getOrderItem()}};window.blnValueGetter=function(e){return e.data.blnReference?\"Yes\":\"No\"};var d=u,p=(a(\"1479\"),a(\"2877\")),m=Object(p[\"a\"])(d,s,l,!1,null,null,null);t[\"default\"]=m.exports}}]);","extractedComments":[]}