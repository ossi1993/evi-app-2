{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-636c9c48\"],{\"5e0c\":function(e,t,r){\"use strict\";r(\"6b24\")},\"689c\":function(e,t,r){\"use strict\";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"main-content\"},[r(\"breadcumb\",{attrs:{page:\"List Order Devices\",folder:\"Order\"}}),e._v(\" \"),r(\"b-row\",[r(\"b-col\",{attrs:{lg:\"6\",md:\"6\",sm:\"12\"}},[r(\"b-card\",{staticClass:\"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center\"},[r(\"i\",{staticClass:\"i-Add-Cart\"}),e._v(\" \"),r(\"div\",{staticClass:\"content\"},[r(\"p\",{staticClass:\"text-muted mt-2 mb-0\"},[e._v(\"Orders\")]),e._v(\" \"),r(\"p\",{staticClass:\"inline text-primary text-24 line-height-1 mb-2\"},[e._v(e._s(this.orders.length))])])])],1),e._v(\" \"),r(\"b-col\",{attrs:{lg:\"6\",md:\"6\",sm:\"12\"}},[r(\"b-card\",{staticClass:\"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center\"},[r(\"i\",{staticClass:\"i-Calendar\"}),e._v(\" \"),r(\"div\",{staticClass:\"content\"},[r(\"p\",{staticClass:\"text-muted mt-2 mb-0\"},[e._v(\"Date\")]),e._v(\" \"),r(\"p\",{staticClass:\"text-primary text-24 line-height-1 mb-2\"},[r(\"nobr\",[e._v(e._s(this.date))])],1)])])],1)],1),e._v(\" \"),e.updateDeviceStatus?r(\"div\",{staticClass:\"row\"},[r(\"div\",{staticClass:\"col-md-12\"},[r(\"div\",{staticClass:\"card mb-30\"},[r(\"div\",{staticClass:\"card-body p-0 mb-3\"},[r(\"b-row\",{staticClass:\"ml-3\"},[r(\"i\",{staticClass:\"nav-icon i-Add mt-3\",staticStyle:{\"font-size\":\"20px\"}}),e._v(\" \"),r(\"h5\",{staticClass:\"card-title border-bottom p-3 mb-2\"},[e._v(\"Update Device Order\")])]),e._v(\" \"),r(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.show,expression:\"show\"}],staticClass:\"mt-3\"},[r(\"b-form\",{on:{submit:function(t){return t.preventDefault(),e.updateDeviceOrder(t)}}},[r(\"b-row\",{staticClass:\"mt-4 ml-3 mr-3\"},[r(\"b-col\",{attrs:{md:\"4\"}},[r(\"v-select\",{attrs:{options:e.devices,required:\"\",placeholder:\"Choose Device\",\"get-option-label\":function(e){return e.idModel.txtModelName+\" - \"+e.txtSerialNumber}},model:{value:e.orderedDevice,callback:function(t){e.orderedDevice=t},expression:\"orderedDevice\"}})],1),e._v(\" \"),r(\"b-col\",{attrs:{md:\"4\"}},[r(\"b-form-datepicker\",{attrs:{placeholder:\"Order Date\",required:\"\",disabled:\"\"},model:{value:e.DatOrder,callback:function(t){e.DatOrder=t},expression:\"DatOrder\"}})],1),e._v(\" \"),r(\"b-col\",{attrs:{md:\"4\"}},[r(\"b-form-datepicker\",{attrs:{placeholder:\"Delivery Date\"},model:{value:e.DatDelivery,callback:function(t){e.DatDelivery=t},expression:\"DatDelivery\"}})],1)],1),e._v(\" \"),r(\"b-row\",{staticClass:\"mt-3 ml-3 mr-3\"},[r(\"b-col\",{attrs:{md:\"6\"}},[r(\"b-form-input\",{attrs:{type:\"number\",min:\"1\",required:\"\"},model:{value:e.OrderAmount,callback:function(t){e.OrderAmount=t},expression:\"OrderAmount\"}})],1),e._v(\" \"),r(\"b-col\",{attrs:{md:\"6\"}},[r(\"b-form-select\",{attrs:{options:e.optionStatus,\"text-field\":\"label\",\"value-field\":\"code\"},model:{value:e.DelStatus,callback:function(t){e.DelStatus=t},expression:\"DelStatus\"}})],1)],1),e._v(\" \"),r(\"b-row\",{staticClass:\"ml-3 mr-3 mt-3\"},[r(\"b-col\",{attrs:{md:\"12\"}},[r(\"b-form-textarea\",{attrs:{placeholder:\"Enter memo ...\",rows:\"3\",\"max-rows\":\"6\"},model:{value:e.Comment,callback:function(t){e.Comment=t},expression:\"Comment\"}})],1)],1),e._v(\" \"),r(\"b-row\",{staticClass:\"ml-3 mr-3 mt-5\"},[r(\"b-col\",{attrs:{md:\"6\"}},[r(\"b-button\",{attrs:{block:\"\",variant:\"outline-info\"},on:{click:e.emptyDeviceInput}},[e._v(\"Cancel\")])],1),e._v(\" \"),r(\"b-col\",{attrs:{md:\"6\"}},[r(\"b-button\",{attrs:{block:\"\",variant:\"warning\",type:\"submit\"}},[e._v(\"Update Device Order\")])],1)],1)],1)],1)],1)])])]):e._e(),e._v(\" \"),r(\"div\",{staticClass:\"row\"},[r(\"div\",{staticClass:\"col-md-12\"},[r(\"div\",{staticClass:\"card mb-30\"},[r(\"div\",{staticClass:\"card-body p-0\"},[r(\"AgGridVue\",{staticClass:\"ag-theme-alpine\",attrs:{id:\"gridOrders\",defaultColDef:e.defaultColDef,columnDefs:e.columnDefs,rowSelection:e.rowSelection,rowData:e.rowData,gridOptions:e.gridOptions,suppressRowClickSelection:!0,excelStyles:e.excelStyles,getContextMenuItems:e.getContextMenu,pagination:!0,paginationPageSize:e.paginationPageSize,domLayout:e.domLayout,modules:e.modules,animateRows:!0,isExternalFilterPresent:e.isExternalFilterPresent,doesExternalFilterPass:e.doesExternalFilterPass},on:{cellValueChanged:e.updateDeviceOrderGrid,\"row-selected\":e.onRowSelected}}),e._v(\" \"),r(\"b-row\",[r(\"b-col\",{attrs:{md:\"6\"}},[r(\"div\",{staticClass:\"ml-3 fmr-3 mt-2 mb-2 text-left\"},[r(\"b-button\",{attrs:{size:\"sm\",variant:\"outline-info\"},on:{click:function(t){return e.changeExternalFilter(\"all\")}}},[e._v(\"Show All\")]),e._v(\" \"),r(\"b-button\",{staticClass:\"ml-3\",attrs:{size:\"sm\",variant:\"outline-info\"},on:{click:function(t){return e.changeExternalFilter(\"delivered\")}}},[e._v(\"Show Delivered\")]),e._v(\" \"),r(\"b-button\",{staticClass:\"ml-3\",attrs:{size:\"sm\",variant:\"outline-info\"},on:{click:function(t){return e.changeExternalFilter(\"not delivered\")}}},[e._v(\"Show Not Delivered\")])],1)]),e._v(\" \"),r(\"b-col\",{attrs:{md:\"6\"}},[r(\"div\",{staticClass:\"ml-3 mr-3 mt-2 mb-2 text-right\"},[e._v(\"\\n                  Page Size:\\n                  \"),r(\"select\",{attrs:{id:\"page-size\"},on:{change:e.onPageSizeChanged}},[r(\"option\",{attrs:{value:\"10\",selected:\"\"}},[e._v(\"10\")]),e._v(\" \"),r(\"option\",{attrs:{value:\"20\"}},[e._v(\"20\")]),e._v(\" \"),r(\"option\",{attrs:{value:\"50\"}},[e._v(\"50\")]),e._v(\" \"),r(\"option\",{attrs:{value:\"100\"}},[e._v(\"100\")]),e._v(\" \"),r(\"option\",{attrs:{value:\"200\"}},[e._v(\"200\")])]),e._v(\" \"),r(\"b-button\",{staticClass:\"ml-3\",attrs:{size:\"sm\",variant:\"outline-success\"},on:{click:e.onBtExport}},[e._v(\"Export Excel\")])],1)])],1)],1)])])]),e._v(\" \"),r(\"b-row\",{staticClass:\"ml-1 mr-3 mb-4\"},[r(\"b-button\",{staticClass:\"mr-3\",attrs:{variant:\"primary\"},on:{click:e.saveState}},[e._v(\"Save Grid State\")]),e._v(\" \"),r(\"b-button\",{attrs:{variant:\"outline-light\"},on:{click:e.restoreState}},[e._v(\"Reset Grid State\")])],1)],1)},a=[],n=r(\"2909\"),o=(r(\"96cf\"),r(\"1da1\")),l=(r(\"c5f6\"),r(\"5ce5\")),s=r(\"228c\"),c=r(\"9974\"),d={metaInfo:{title:\"Device Orders\"},components:{AgGridVue:s[\"AgGridVue\"]},data:function(){return{gridOptions:null,gridApi:null,columnApi:null,columnDefs:null,rowData:null,rowSelection:null,defaultColDef:null,excelStyles:null,frameworkComponents:null,domLayout:null,modules:c[\"a\"],orders:[],devices:[],orderedDevice:[],DatOrder:null,DatDelivery:null,OrderAmount:null,DelStatus:null,Comment:null,show:!1,date:null,next:null,error:!1,updateDeviceId:null,updateDeviceStatus:!1,optionStatus:[{code:null,label:\"Choose Delivery Status\"},{code:\"Delivered\",label:\"Delivered\"},{code:\"Not Delivered\",label:\"Not Delivered\"}]}},beforeMount:function(){this.gridOptions={},this.columnDefs=[{headerName:\"Order Number\",field:\"idOrder.txtOrderNumber\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Serial Number\",field:\"idDevice.txtSerialNumber\",filter:\"agTextColumnFilter\"},{headerName:\"IMEI\",field:\"idDevice.txtIMEI\",filter:\"agTextColumnFilter\"},{headerName:\"Device\",field:\"idDevice.idModel.txtModelName\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Order Amount\",field:\"numOrderAmount\",filter:\"agTextColumnFilter\"},{headerName:\"Order Date\",field:\"datOrder\",filter:\"agTextColumnFilter\"},{headerName:\"Delivery Date\",field:\"datDelivery\",filter:\"agTextColumnFilter\"},{headerName:\"Delivery Status\",field:\"txtDeliveryStatus\",filter:\"agTextColumnFilter\",editable:!1},{headerName:\"Memo\",field:\"txtComment\",filter:\"agTextColumnFilter\"}],this.defaultColDef={flex:1,editable:!0,resizable:!0,sortable:!0,filter:!0,floatingFilter:!0},this.rowSelection=\"single\",this.domLayout=\"autoHeight\",this.paginationPageSize=10},mounted:function(){null!=JSON.parse(localStorage.getItem(\"orderDevice_columnStats\"))?this.gridOptions.columnApi.setColumnState(JSON.parse(localStorage.getItem(\"orderDevice_columnStats\"))):(this.gridApi=this.gridOptions.api,this.gridColumnApi=this.gridOptions.columnApi)},methods:{saveState:function(){localStorage.setItem(\"orderDevice_columnStats\",JSON.stringify(this.gridOptions.columnApi.getColumnState()))},restoreState:function(){localStorage.setItem(\"orderDevice_columnStats\",null)},onBtExport:function(){this.gridApi.exportDataAsExcel({})},onPageSizeChanged:function(e){var t=document.getElementById(\"page-size\").value;this.gridApi.paginationSetPageSize(Number(t))},onRowSelected:function(e){this.show1=!this.show1},changeExternalFilter:function(e){this.extFilter=e,this.gridApi.onFilterChanged()},isExternalFilterPresent:function(){return null!==this.extFilter},doesExternalFilterPass:function(e){switch(this.extFilter){case\"all\":return!0;case\"delivered\":return\"Delivered\"===e.data.txtDeliveryStatus;case\"not delivered\":return\"Not Delivered\"===e.data.txtDeliveryStatus;default:return!0}},editOrderDeviceMenu:function(e){this.emptyDeviceInput();var t=e.node.data;this.orderedDevice=t.idDevice,this.DatOrder=t.datOrder,this.DatDelivery=t.datDelivery,this.OrderAmount=t.numOrderAmount,this.DelStatus=t.txtDeliveryStatus,this.Comment=t.txtComment,this.updateDeviceStatus=!0,this.updateDeviceId=t.id,this.show=!0,document.documentElement.scrollTop=0},updateDeviceOrder:function(){var e=Object(o[\"a\"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=\"/api/order-device/\".concat(this.updateDeviceId,\"/\"),e.next=3,Object(l[\"a\"])(t,\"PATCH\",{datOrder:this.DatOrder,datDelivery:this.DatDelivery,numOrderAmount:this.OrderAmount,txtDeliveryStatus:this.DelStatus,txtComment:this.Comment,idDevice:this.orderedDevice.id}).then((function(e){r.getDeviceOrder(),r.emptyDeviceInput()}));case 3:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateDeviceOrderGrid:function(){var e=Object(o[\"a\"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=\"/api/order-device/\".concat(t.node.data.id,\"/\"),e.prev=1,e.next=4,Object(l[\"a\"])(r,\"PATCH\",{datOrder:t.node.data.datOrder,datDelivery:t.node.data.datDelivery,numOrderAmount:t.node.data.numOrderAmount,txtDeliveryStatus:t.node.data.txtDeliveryStatus}).catch((function(e){return console.log(e)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e[\"catch\"](1),console.log(e.t0);case 9:case\"end\":return e.stop()}}),e,null,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}(),openModal:function(e){var t=this;this.$bvModal.msgBoxConfirm(\"Are you sure you want to delete the selected Order? => \"+e.node.data.idDevice.txtSerialNumber,{title:\"Please Confirm\",size:\"m\",buttonSize:\"sm\",okVariant:\"danger\",okTitle:\"YES\",cancelTitle:\"NO\",footerClass:\"p-2\",hideHeaderClose:!1,centered:!0}).then((function(r){r&&t.deleteDeviceOrder(e)})).catch((function(e){return console.log(e)}))},deleteDeviceOrder:function(){var e=Object(o[\"a\"])(regeneratorRuntime.mark((function e(t){var r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=\"/api/order-device/\".concat(t.node.data.id,\"/\"),e.next=3,Object(l[\"a\"])(r,\"DELETE\").then((function(e){\"ERROR\"!=e?i.getDeviceOrder():i.$bvToast.toast(\"You can't delete this instance. Please check if all connections to this instance are deleted.\",{title:\"DELETE WARNING\",variant:\"danger\",autoHideDelay:6e3,appendToast:!1})}));case 3:case\"end\":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),emptyDeviceInput:function(e){this.DatOrder=this.DatDelivery=this.OrderAmount=this.DelStatus=this.Comment=null,this.orderedDevice=[],this.show=!this.show,this.updateDeviceStatus=!1},getDevice:function(){var e=this;if(!this.error){this.devices=[];var t=\"/api/device-list/\";Object(l[\"a\"])(t).then((function(t){var r;(r=e.devices).push.apply(r,Object(n[\"a\"])(t.results))})).catch((function(e){return console.log(e)}))}},getDeviceOrder:function(){var e=this;if(!this.error){this.orders=[];var t=\"/api/order-device-list/\";Object(l[\"a\"])(t).then((function(t){var r;(r=e.orders).push.apply(r,Object(n[\"a\"])(t.results)),e.rowData=e.orders})).catch((function(e){return console.log(e)}))}},getDateToday:function(){var e=new Date;this.date=e.getDate()+\" / \"+(e.getMonth()+1)+\" / \"+e.getFullYear()},getContextMenu:function(e){var t=this,r=[{name:\"Edit Order Device\",action:function(){return t.editOrderDeviceMenu(e)}},\"separator\",{name:\"Delete Device Order\",action:function(){return t.openModal(e)}},\"export\"];return r}},created:function(){this.getDeviceOrder(),this.getDateToday(),this.getDevice()}},u=d,m=(r(\"5e0c\"),r(\"2877\")),v=Object(m[\"a\"])(u,i,a,!1,null,null,null);t[\"default\"]=v.exports},\"6b24\":function(e,t,r){}}]);","extractedComments":[]}