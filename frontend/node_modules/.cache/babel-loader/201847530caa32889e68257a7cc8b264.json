{"remainingRequest":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\src\\views\\app\\inspection\\inspection.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\src\\views\\app\\inspection\\inspection.vue","mtime":1604219687984},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anwender\\SJO\\evi\\evi\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:/Users/Anwender/SJO/evi/evi/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { apiService } from \"@/common/api.service.js\";\nimport { AgGridVue } from '@ag-grid-community/vue';\nimport $ from 'jquery'; // import print from 'print-js'\n\nimport { Color } from '@ag-grid-community/all-modules';\nexport default {\n  metaInfo: {\n    title: \"Edit Inspection\"\n  },\n  components: {\n    AgGridVue: AgGridVue\n  },\n  data: function data() {\n    return {\n      // VUE VARIABLES\n      inspection: [],\n      inNum: [],\n      inType: [],\n      inStatus: [],\n      samples: [],\n      sampleAttributes: [],\n      activeSampleAttributes: [],\n      device: [],\n      // RELEASE & NOTES\n      IStatus: 'Work In Progress',\n      IType: null,\n      DatInspection: null,\n      DatDeliveredOn: null,\n      DatRequestedOn: null,\n      RequestedBy: null,\n      Inspector: null,\n      Comment: null,\n      // BOOLEAN STATES\n      loadingDevice: false,\n      loadingSample: false,\n      loadingAttributes: false,\n      loadingNumber: false,\n      loadingType: false,\n      error: false,\n      Superuser: false,\n      // OPTIONS  \n      optionsInspectionStatus: [{\n        value: 'Work In Progress',\n        text: 'Work In Progress'\n      }, {\n        value: 'On Hold',\n        text: 'On Hold'\n      }, {\n        value: 'Complete',\n        text: 'Complete'\n      }, {\n        value: 'Declined',\n        text: 'Declined'\n      }]\n    };\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    var id = localStorage.getItem('InspectionID');\n\n    if (id == null || id == undefined) {\n      next('/app/inspection/inspection-list');\n    } else {\n      next();\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    localStorage.removeItem('InspectionID');\n    next();\n  },\n  computed: {},\n  methods: {\n    onSubmit: function onSubmit(type) {\n      var _this = this;\n\n      if (type == 'save') {\n        this.saveInspection();\n      } else if (type == 'close') {\n        this.saveInspection();\n        setTimeout(function () {\n          _this.closeInspection();\n        }, 2300);\n      }\n    },\n    returnFilteredAtts: function returnFilteredAtts(sample, type) {\n      var el = this.sampleAttributes.filter(function (e) {\n        return e.idSample == sample.id;\n      });\n      var temp = el.filter(function (e) {\n        return e.txtValueType == type;\n      });\n      return temp;\n    },\n    closeInspection: function closeInspection() {\n      this.$router.push(\"/app/inspection/inspection-list/\");\n    },\n    saveInspection: function saveInspection() {\n      var _this2 = this;\n\n      var id = localStorage.getItem('InspectionID');\n      var InspectionNumber = this.inNum.label + '-' + this.inNum.type + '-' + this.inNum.year + '-' + this.inNum.number;\n      var endpoint = \"/api/inspection/\".concat(id, \"/\");\n      apiService(endpoint, \"PATCH\", {\n        txtInspectionNumber: InspectionNumber,\n        txtInspectionStatus: this.inStatus,\n        txtInspector: this.Inspector,\n        datInspection: this.DatInspection,\n        datDeliveredOn: this.DatDeliveredOn,\n        datRequestedOn: this.DatRequestedOn,\n        txtRequestedBy: this.RequestedBy,\n        txtComment: this.Comment\n      }).then(function (response) {\n        _this2.$bvToast.toast(\"Saved successfully!\", {\n          title: 'SUCCESS',\n          variant: 'success',\n          autoHideDelay: 2000,\n          appendToast: false\n        });\n      });\n    },\n    saveSampleAttributes: function saveSampleAttributes(att) {\n      if (att !== undefined) {\n        if (att.txtValueAttribute !== \"\") {\n          var endpoint = \"/api/sample-attribute/\".concat(att.id, \"/\");\n          apiService(endpoint, \"PATCH\", {\n            txtValueAttribute: att.txtValueAttribute,\n            txtParameter: att.txtParameter\n          });\n        }\n      }\n    },\n    fillInspection: function fillInspection() {\n      this.inStatus = this.inspection.txtInspectionStatus;\n      this.Inspector = this.inspection.txtInspector;\n      this.RequestedBy = this.inspection.txtRequestedBy;\n      this.DatInspection = this.inspection.datInspection;\n      this.DatDeliveredOn = this.inspection.datDeliveredOn;\n      this.DatRequestedOn = this.inspection.datRequestedOn;\n      this.Comment = this.inspection.txtComment;\n    },\n    getParameter: function getParameter(params) {\n      var arr = [];\n      var el = params.split(',');\n\n      for (var i = 0; i < el.length; i++) {\n        arr.push({\n          value: el[i],\n          text: el[i]\n        });\n      }\n\n      return arr;\n    },\n    getSamples: function getSamples(id) {\n      var _this3 = this;\n\n      this.samples = [];\n      var endpoint = \"/api/sample-list/\";\n      apiService(endpoint).then(function (data) {\n        var el = [];\n        el.push.apply(el, _toConsumableArray(data.results));\n        _this3.samples = el.filter(function (e) {\n          return e.idInspection.id === id;\n        });\n        _this3.loadingSample = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getSampleAttributes: function getSampleAttributes() {\n      var _this4 = this;\n\n      this.sampleAttributes = [];\n      var endpoint = \"/api/sample-attribute/\";\n      apiService(endpoint).then(function (data) {\n        var _this4$sampleAttribut;\n\n        (_this4$sampleAttribut = _this4.sampleAttributes).push.apply(_this4$sampleAttribut, _toConsumableArray(data.results));\n\n        _this4.loadingAttributes = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getOrderDevice: function getOrderDevice(id) {\n      var _this5 = this;\n\n      this.device = [];\n      var endpoint = \"/api/order-device-list/\";\n      apiService(endpoint).then(function (data) {\n        var el = [];\n        el.push.apply(el, _toConsumableArray(data.results));\n        var temp = el.filter(function (e) {\n          return e.id == id;\n        });\n        _this5.device = temp[0];\n        _this5.loadingDevice = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getInspection: function getInspection() {\n      var _this6 = this;\n\n      var id = localStorage.getItem('InspectionID');\n      var endpoint = \"/api/inspection/\".concat(id, \"/\");\n      apiService(endpoint).then(function (data) {\n        _this6.inspection = data;\n\n        _this6.fillInspection();\n\n        _this6.getOrderDevice(_this6.inspection.idOrderDevice);\n\n        _this6.getSamples(_this6.inspection.id);\n\n        _this6.getInspectionNumber(_this6.inspection.txtInspectionNumber);\n\n        _this6.getInspectionType(_this6.inspection.idInspectionType);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    getInspectionNumber: function getInspectionNumber(number) {\n      var el = number.split('-');\n      this.inNum = {\n        label: el[0],\n        type: el[1],\n        year: el[2],\n        number: el[3]\n      };\n      this.loadingNumber = true;\n    },\n    getInspectionType: function getInspectionType(id) {\n      var _this7 = this;\n\n      var endpoint = \"/api/inspection-type/\".concat(id, \"/\");\n      apiService(endpoint).then(function (data) {\n        _this7.inType = data;\n        _this7.loadingType = true;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  },\n  created: function created() {\n    this.getSampleAttributes();\n    this.getInspection();\n  }\n};",{"version":3,"sources":["inspection.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!-- ============ Body content start ============= -->\n  <div class=\"main-content\" id=\"pdfContent\">\n      <breadcumb v-if=\"this.loadingType\" :page=this.inType.txtInspectionType :folder=\"'Inspection'\" />\n\n      <b-form @submit.prevent=\"onSubmit('save')\" @reset.prevent=\"onSubmit('close')\">\n\n      <!-- ################################################ -->\n      <!-- ########### INSPECTION NUMBER SECTION ########## -->\n      <!-- ################################################ -->\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <b-row>\n            <b-col md=\"6\">\n              <!-- INSPECTION -->\n              <div class=\"card bg-light\"  v-if=\"this.loadingNumber\">\n                <div class=\"card-body p-0\">\n                  <h5 class=\"card-title p-3 pb-0 mb-0\"><strong>Inspection Number</strong></h5>\n                  <b-row class=\"mr-3 p-3 pt-0\">\n                    <b-col md=\"4\" class=\"mt-3\">\n                      <h6 class=\"mb-1\">Full Inspection Number</h6>\n                      <b-input-group-text style=\"font-weight: 700;\">{{ this.inNum.label }}-{{ this.inNum.type }}-{{ this.inNum.year }}-{{ this.inNum.number }}</b-input-group-text>\n                    </b-col>\n                    <b-col md=\"4\" class=\"mt-3\">\n                      <h6 class=\"mb-1\">Year</h6>\n                      <b-form-input v-model=\"inNum.year\" required type=\"tel\" maxlength=\"4\"></b-form-input>\n                    </b-col>\n                    <b-col md=\"4\" class=\"mt-3\">\n                      <h6 class=\"mb-1\">ID</h6>\n                      <b-form-input v-model=\"inNum.number\" required type=\"tel\" maxlength=\"4\"></b-form-input>\n                    </b-col>\n                  </b-row>\n                </div>\n              </div>\n            </b-col>\n            <b-col md=\"6\">\n              <!-- DEVICE -->\n              <div class=\"card bg-light\" v-if=\"this.loadingDevice\">\n                <div class=\"card-body p-0\">\n                  <h5 class=\"card-title p-3 pb-0 mb-0\"><strong>Device Model</strong></h5>\n                  <b-row class=\"mr-3 p-3 pt-0\">\n                    <b-col md=\"4\" class=\"mt-3\">\n                      <h6 class=\"mb-1\">Model:</h6>\n                      <b-input-group-text style=\"font-weight: 700;\">{{ this.device.idDevice.idModel.txtModelName }}</b-input-group-text>\n                    </b-col>\n                    <b-col md=\"4\" class=\"mt-3\">\n                      <h6 class=\"mb-1\">Serial Number:</h6>\n                      <b-input-group-text style=\"font-weight: 700;\">{{ this.device.idDevice.txtSerialNumber }}</b-input-group-text>\n                    </b-col>\n                    <b-col md=\"4\" class=\"mt-3\">\n                      <h6 class=\"mb-1\">Device Position:</h6>\n                      <b-input-group-text style=\"font-weight: 700;\">{{ this.device.idDevice.idDevicePosition.txtDevicePosition }}</b-input-group-text>\n                    </b-col>\n                  </b-row>  \n                </div>\n              </div>\n            </b-col>\n          </b-row>\n        </div>\n      </div>\n\n      <!-- ##################################### -->\n      <!-- ########### SAMPLE SECTION ########## -->\n      <!-- ##################################### -->\n      <div class=\"row mt-3\" v-if=\"this.loadingSample\" id=\"sample-section\">\n        <div class=\"col-md-12\">\n          <div class=\"card\" id=\"card-item-1\">\n            <div class=\"card-body p-0\">\n              <b-row class=\"mr-3 p-3 pt-0 pb-0\">\n                <h5 class=\"card-title p-3 pb-0 mb-0\">Samples</h5>\n                <!-- <i class=\"nav-icon i-Billing mt-3\" style=\"font-size: 20px\" @click=\"printHTML()\"></i> -->\n              </b-row>\n              <b-row class=\"mr-3 p-3 pt-0\">\n                <b-col md=\"12\" class=\"mt-3\">\n                  <b-tabs content-class=\"mt-3\">\n                    <b-tab v-for=\"sample in samples\" :key=\"sample.id\" >\n                      <template #title>Sample ID: {{ sample.id }}</template>\n                      <b-container fluid v-if=\"loadingAttributes\">\n                        <b-row class=\"mb-3\">\n                          <b-col md=\"12\" class=\"mb-1\" v-if=\"returnFilteredAtts(sample, 'Integer').length >= 1\">Parameter: Integer</b-col>\n                          <b-col md=\"3\" v-for=\"attribute in returnFilteredAtts(sample, 'Integer')\" :key=\"attribute.id\">\n                            <b-input-group class=\"mb-3\" :prepend=\"attribute.txtNameAttribute\"> \n                              <b-form-input required v-model=\"attribute.txtValueAttribute\" @change=\"saveSampleAttributes(attribute)\"></b-form-input>\n                            </b-input-group>\n                          </b-col>\n                        </b-row>\n                        <b-row class=\"mb-3\">\n                          <b-col md=\"12\" class=\"mb-1\" v-if=\"returnFilteredAtts(sample, 'String').length >= 1\">Parameter: String</b-col>\n                          <b-col md=\"3\" v-for=\"attribute in returnFilteredAtts(sample, 'String')\" :key=\"attribute.id\">\n                            <b-input-group class=\"mb-3\" :prepend=\"attribute.txtNameAttribute\"> \n                              <b-form-input required v-model=\"attribute.txtValueAttribute\" @change=\"saveSampleAttributes(attribute)\"></b-form-input>\n                            </b-input-group>\n                          </b-col>\n                        </b-row>\n                        <b-row class=\"mb-3\">\n                          <b-col md=\"12\" class=\"mb-1\" v-if=\"returnFilteredAtts(sample, 'Float').length >= 1\">Parameter: Float</b-col>\n                          <b-col md=\"3\" v-for=\"attribute in returnFilteredAtts(sample, 'Float')\" :key=\"attribute.id\">\n                            <b-input-group class=\"mb-3\" :prepend=\"attribute.txtNameAttribute\" :append=\"attribute.txtParameter\"> \n                              <b-form-input required v-model=\"attribute.txtValueAttribute\" @change=\"saveSampleAttributes(attribute)\"></b-form-input>\n                            </b-input-group>\n                          </b-col>\n                        </b-row>\n                        <b-row class=\"mb-3\">\n                          <b-col md=\"12\" class=\"mb-1\" v-if=\"returnFilteredAtts(sample, 'Boolean').length >= 1\">Parameter: Boolean</b-col>\n                          <b-col md=\"3\" v-for=\"attribute in returnFilteredAtts(sample, 'Boolean')\" :key=\"attribute.id\">\n                            <b-input-group class=\"mb-3\" :prepend=\"attribute.txtNameAttribute\" >\n                              <b-form-select required v-model=\"attribute.txtValueAttribute\" @change=\"saveSampleAttributes(attribute)\">\n                                <b-form-select-option value=\"true\">True</b-form-select-option>\n                                <b-form-select-option value=\"false\">False</b-form-select-option>\n                              </b-form-select>\n                            </b-input-group>\n                          </b-col>\n                        </b-row>\n                        <b-row class=\"mb-3\">\n                          <b-col md=\"12\" class=\"mb-1\" v-if=\"returnFilteredAtts(sample, 'Select').length >= 1\">Parameter: Select</b-col>\n                          <b-col md=\"3\" v-for=\"attribute in returnFilteredAtts(sample, 'Select')\" :key=\"attribute.id\">\n                            <b-input-group class=\"mb-3\" :prepend=\"attribute.txtNameAttribute\">\n                              <b-form-select required v-model=\"attribute.txtValueAttribute\" :options=\"getParameter(attribute.txtParameter)\"\n                               @change=\"saveSampleAttributes(attribute)\"></b-form-select>\n                            </b-input-group>\n                          </b-col>\n                        </b-row>\n                      </b-container>\n                    </b-tab>\n                  </b-tabs>\n                </b-col>\n              </b-row>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- ######################################################## -->\n      <!-- ########### RELEASE / NOTES / COMMENT SECTION ########## -->\n      <!-- ######################################################## -->\n      <div class=\"row mt-3\" id=\"section_release_notes\">\n        <div class=\"col-md-12\">\n          <div class=\"card bg-light\" id=\"card-notes\">\n            <div class=\"card-body p-0\">\n              <h5 class=\"card-title p-3 pb-0 mb-0\"><strong>Release & Notes</strong></h5>\n              <b-row class=\"mr-2 ml-2 mt-4 p-3 pt-0\">\n                <b-col md=\"4\">\n                  <b-input-group prepend=\"Auditor\" >\n                    <b-form-input required v-model=\"Inspector\" placeholder=\"Enter your initials ...\"></b-form-input>\n                  </b-input-group>\n                </b-col>\n                <b-col md=\"4\">\n                  <b-input-group prepend=\"Requested By\" >\n                    <b-form-input required v-model=\"RequestedBy\" placeholder=\"Enter your initials ...\"></b-form-input>\n                  </b-input-group>\n                </b-col>\n                <b-col md=\"4\">\n                  <b-input-group prepend=\"Inspection Status\">\n                    <b-form-select required v-model=\"inStatus\" :options=\"optionsInspectionStatus\"></b-form-select>\n                  </b-input-group>\n                </b-col>\n              </b-row>\n              <b-row  class=\"mr-2 ml-2 p-3 pt-0\">\n                <b-col md=\"4\">\n                  <b-input-group prepend=\"Inspection Date\" >\n                    <b-form-datepicker required v-model=\"DatInspection\" placeholder=\"Enter your initials ...\"></b-form-datepicker>\n                  </b-input-group>\n                </b-col>\n                <b-col md=\"4\">\n                  <b-input-group prepend=\"Delivered On\" >\n                    <b-form-datepicker v-model=\"DatDeliveredOn\" placeholder=\"Enter your initials ...\"></b-form-datepicker>\n                  </b-input-group>\n                </b-col>\n                <b-col md=\"4\">\n                  <b-input-group prepend=\"Requested On\" >\n                    <b-form-datepicker v-model=\"DatRequestedOn\" placeholder=\"Enter your initials ...\"></b-form-datepicker>\n                  </b-input-group>\n                </b-col>\n              </b-row>\n              <b-row class=\"mr-2 ml-2 mb-3 p-3 pt-0\">\n                <b-col md=\"12\" class=\"mt-3\">\n                  <h5 class=\"mb-1\">Comment</h5>\n                  <b-form-textarea v-model=\"Comment\" placeholder=\"Enter memo ...\" rows=\"3\" max-rows=\"6\"></b-form-textarea>\n                </b-col>\n              </b-row>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- SAVE BUTTON -->\n        <b-button type=\"submit\" class=\"mr-3 mt-3\" size=\"lg\" variant=\"success\">Save</b-button>\n        <b-button type=\"reset\" class=\"mr-3 mt-3\" size=\"lg\" variant=\"outline-success\">Save & Close</b-button>\n        <!-- <b-button @click=\"createPDF\" class=\"mr-3\" variant=\"outline-primary\">PDF</b-button> -->\n      </b-form>\n\n  </div>\n  <!-- ============ Body content End ============= -->\n</template>\n<script>\nimport { apiService } from \"@/common/api.service.js\";\nimport { AgGridVue } from '@ag-grid-community/vue';\nimport $ from 'jquery';\n// import print from 'print-js'\nimport { Color } from '@ag-grid-community/all-modules';\n\nexport default {\n  metaInfo: {    \n    title: \"Edit Inspection\"\n  },\n  components: {\n    AgGridVue\n  },\n  data() {\n    return {\n      // VUE VARIABLES\n      inspection: [],\n      inNum: [],\n      inType: [],\n      inStatus: [],\n      samples: [],\n      sampleAttributes: [],\n      activeSampleAttributes: [],\n      device: [],\n\n\n      // RELEASE & NOTES\n      IStatus: 'Work In Progress',\n      IType: null,\n      DatInspection: null,\n      DatDeliveredOn: null,\n      DatRequestedOn: null,\n      RequestedBy: null,\n      Inspector: null,\n      Comment: null,\n\n      // BOOLEAN STATES\n      loadingDevice: false,\n      loadingSample: false,\n      loadingAttributes: false,\n      loadingNumber: false,\n      loadingType: false,\n      error: false,\n      Superuser: false,\n\n      // OPTIONS  \n      optionsInspectionStatus: [\n        { value: 'Work In Progress', text: 'Work In Progress' },\n        { value: 'On Hold', text: 'On Hold' },\n        { value: 'Complete', text: 'Complete' },\n        { value: 'Declined', text: 'Declined' },\n      ],\n    };\n  },\n  beforeRouteEnter (to, from, next) {\n    let id = localStorage.getItem('InspectionID')\n      if(id == null || id == undefined) {\n        next('/app/inspection/inspection-list');\n      } else {\n        next();\n      }\n  },\n  beforeRouteLeave (to, from, next) {\n      localStorage.removeItem('InspectionID')\n      next();\n  },\n  computed: {\n  },\n  methods: {\n    onSubmit(type) {\n      if(type == 'save') {\n        this.saveInspection();\n      } else if(type == 'close') {\n        this.saveInspection();\n        setTimeout(() => {\n          this.closeInspection();\n        }, 2300);\n      }\n    },\n    returnFilteredAtts(sample, type) {\n      let el = this.sampleAttributes.filter(e => e.idSample == sample.id)\n      const temp = el.filter(e => e.txtValueType == type)\n      return temp;\n    },\n    closeInspection() {\n      this.$router.push(`/app/inspection/inspection-list/`)\n    },\n    saveInspection() {\n      let id = localStorage.getItem('InspectionID');\n      let InspectionNumber = this.inNum.label + '-' + this.inNum.type + '-' + this.inNum.year + '-' + this.inNum.number;\n      let endpoint = `/api/inspection/${id}/`;\n      apiService(endpoint, \"PATCH\", {  \n        txtInspectionNumber: InspectionNumber, \n        txtInspectionStatus: this.inStatus, \n        txtInspector: this.Inspector,\n        datInspection: this.DatInspection,\n        datDeliveredOn: this.DatDeliveredOn,\n        datRequestedOn: this.DatRequestedOn,\n        txtRequestedBy: this.RequestedBy,\n        txtComment: this.Comment,\n        })\n        .then(response => {\n          this.$bvToast.toast(`Saved successfully!`, {\n            title: 'SUCCESS', variant: 'success', autoHideDelay: 2000, appendToast: false })\n        })\n    },\n    saveSampleAttributes(att) {\n      if(att !== undefined) {\n        if(att.txtValueAttribute !== \"\" ) {\n          let endpoint = `/api/sample-attribute/${att.id}/`;\n          apiService(endpoint, \"PATCH\", {  \n            txtValueAttribute: att.txtValueAttribute, \n            txtParameter: att.txtParameter, \n            })\n        }\n      }\n    },\n    fillInspection() {\n      this.inStatus = this.inspection.txtInspectionStatus;\n      this.Inspector = this.inspection.txtInspector;\n      this.RequestedBy = this.inspection.txtRequestedBy;\n      this.DatInspection = this.inspection.datInspection;\n      this.DatDeliveredOn = this.inspection.datDeliveredOn;\n      this.DatRequestedOn = this.inspection.datRequestedOn;\n      this.Comment = this.inspection.txtComment;\n    },\n    getParameter(params) {\n      let arr = [];\n      let el = params.split(',');\n      for (let i = 0; i < el.length; i++) {\n        arr.push({ value: el[i], text: el[i] });\n      }\n      return arr;\n    },\n    getSamples(id) {\n      this.samples = [];\n      let endpoint = `/api/sample-list/`;\n      apiService(endpoint)\n        .then(data => {\n          let el = [];\n          el.push(...data.results);\n          this.samples = el.filter(e => e.idInspection.id === id)\n          this.loadingSample = true;\n        })\n        .catch(err => console.log(err));\n    },\n    getSampleAttributes() {\n      this.sampleAttributes = [];\n      let endpoint = `/api/sample-attribute/`;\n      apiService(endpoint)\n        .then(data => { \n          this.sampleAttributes.push(...data.results);\n          this.loadingAttributes = true;\n        })\n        .catch(err => console.log(err));\n    },\n    getOrderDevice(id) {\n      this.device = [];\n      let endpoint = `/api/order-device-list/`;\n      apiService(endpoint)\n        .then(data => { \n          let el = [];\n          el.push(...data.results);\n          let temp = el.filter(e => e.id == id);\n          this.device = temp[0];\n          this.loadingDevice = true;\n        })\n        .catch(err => console.log(err));\n    },\n    getInspection() {\n      let id = localStorage.getItem('InspectionID');\n      let endpoint = `/api/inspection/${id}/`;\n      apiService(endpoint)\n        .then(data => { \n          this.inspection = data;\n          this.fillInspection();\n          this.getOrderDevice(this.inspection.idOrderDevice);\n          this.getSamples(this.inspection.id);\n          this.getInspectionNumber(this.inspection.txtInspectionNumber);\n          this.getInspectionType(this.inspection.idInspectionType);\n        })\n        .catch(err => console.log(err));\n    },\n    getInspectionNumber(number) {\n      let el = number.split('-');\n      this.inNum = { label: el[0], type: el[1], year: el[2], number: el[3] };\n      this.loadingNumber = true;\n    },\n    getInspectionType(id) {\n      let endpoint = `/api/inspection-type/${id}/`;\n      apiService(endpoint)\n        .then(data => {\n          this.inType = data;\n          this.loadingType = true;\n        })\n        .catch(err => console.log(err));\n    },\n  },\n  created() {\n    this.getSampleAttributes();\n    this.getInspection();\n},\n};\n</script>\n<style>\n  html, body, div {\n    box-sizing: border-box!important;\n  }\n\n  i:focus,\n  input:focus,\n  select:focus,\n  textarea:focus,\n  button:focus {\n      outline: none;\n  }\n\n</style>\n"],"sourceRoot":"src/views/app/inspection"}]}